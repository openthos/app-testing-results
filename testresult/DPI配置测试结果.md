## DPI适配目标

- 在以下设备上，应用的视觉大小是基本一致的，包括
   - 13-14寸1366x768 （112-121PPI） 取120
   - 13-14寸1920x1080  （158-170PPI）取160
   - 14.1-15.6寸3840x2160 (283-313PPI) 取320
   - 21.5-23寸1920x1080 （96-103PPI）但屏幕距离远，取160
   - 24-27寸3840x2160 (164-184PPI）但屏幕距离远，取240
   - 电视机类，4K一律取240，1080P一律取120
- 上述数字仅供参考，需要看实际测试效果，我们的Core App要按照android编程规范要求进行排查确保都符合。

- 软件设置工具默认也使用这些选项，当用户改错的时候，恢复默认也恢复到这个设置。
- 1366笔记本，DPI固定为120
- DPI切换后如果我们的自研应用有异常，应通知相应开发者修改
   - 如果切换DPI后系统和其他应用有较多问题，应执行系统重启操作，之前提示用户保存数据（虽然目前app都是自动保存）
   - 另外，切换DPI的工具如果问题较多，可以改为初始化向导中调用的一次性工具（并且给出默认建议值），不允许普通用户随便改来改去

## DPI配置测试结果

1、首次配置中，显示配置界面测试

- 可以选择低、中、高三种分辨率

2、进入系统后，设置->显示->屏幕分辨率

- 可以选择低、中、高三种分辨率

3、不同设备测试

设备名称|尺寸|分辨率|低分辨率(120)|中分辨率(160)|高分辨率(240)|
-----|-----|-----|-----|-----|-----|
同方T45|14寸|1366×768|显示略小，文字图片较小且模糊|显示略大，开始菜单较宽，通知中心底部按钮被任务栏遮挡|提示系统界面停止运行|
同方T43U|14寸|1920×1080|图标文字整体较小，不好辨认|默认分辨率，视觉效果最好|图标文字整体较大，部分应用中文字显示不全|
同方MasterProS6|15.6寸|1920×1080|文字图片过小且模糊|显示合适。默认字体下，开始菜单多个应用文字显示不全（一般情况下5个字的app可以正常显示）|知中心底部按钮被任务栏遮挡。浏览器部分页面只显示左上角(比如github)|
同方显示器LE21BW-D|20.7寸|1920×1080|文字图片较小且模糊|显示合适。默认字体下，开始菜单多个应用文字显示不全（一般情况下5个字的app可以正常显示）|知中心底部按钮被任务栏遮挡。浏览器部分页面只显示左上角(比如github)|
同方显示器EM2470W|23.6寸|1920×1080|U盘启动异常，无法测试|U盘启动异常，无法测试|U盘启动异常，无法测试|
AOC显示器I2771FM9|27寸|4k,实际1920x1080|文字图片较小且模糊|显示合适。默认字体下，开始菜单多个应用文字显示不全（一般情况下5个字的app可以正常显示）|通知中心底部按钮被任务栏遮挡。浏览器部分页面只显示左上角(比如github)|

4、应用适配测试，存在问题的应用如下表

![](https://github.com/openthos/app-testing-results/blob/master/IMGview/dpi.png)

- 目前无法确认的应用以及可接受应用：
   - 影梭界面改变合理，可正常使用
   - 应用商店无法使用，导致微信不能升级而无法登录帐号，所以应用商店、微信无法确认在各个dpi下是否正常使用
   - Internet浏览器中，网页内容显示不居中或者太大而不完整，认为可能与网页相关
- 需要修改的：
   - 相机在120DPI下会停止运行
   - 权限管理器在240DPI下会停止运行
   - 首次配置在120DPI下，本机设置界面文字显示不完整，开始使用界面文字显示不完整
   - 任务栏和通知中心不会跟随DPI修改而变化，重启系统后生效，即使是首次配置中选择120或240，启动后仍为160DPI，仍需重新启动
   - 通知中心在240DPI下，下方文字(截图等）不显示
   - 任务栏中的网络图标在120、240DPI下均显示不完整

### 问题汇总
- 已解决
   - 每次修改分辨率后，以太网都会关闭，需手动开启
   - 1366笔记本设置240dpi会提示系统界面已停止运行，重启后也如此
   - 1366笔记本设置dpi为160时，通知中心底部按钮被任务栏遮挡,图片见禅道[bug 2266]
   - 1366笔记本没有合适的dpi，建议单独设置
   - 技嘉台式机第一次首次配置完毕会再次进入首次配置，第二次配置后才会进入桌面，同方LE21BW-D第三次首次配置后才进入桌面
- 仍存在
   - 从低dpi切换到高dpi后浏览器的部分页面不会自动调整（比如github），调整后再开一个新的页面仍然只显示一半
   - 2315 修改dpi会导致窗口混乱，且无法正常点击到标题栏中的按钮
   - 相机在120DPI下会停止运行
   - 权限管理器在240DPI下会停止运行
   - 首次配置在120DPI下，本机设置界面文字显示不完整，开始使用界面文字显示不完整
   - 任务栏和通知中心不会跟随DPI修改而变化，重启系统后生效，即使是首次配置中选择120或240，启动后仍为160DPI，仍需重新启动
   - 通知中心在240DPI下，下方文字(截图等）不显示
   - 任务栏中的网络图标在120、240DPI下均显示不完整
